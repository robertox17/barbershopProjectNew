{"ast":null,"code":"var _jsxFileName = \"/Users/school/Desktop/barbershopProjectNew/client/src/pages/Appointments/index.js\",\n  _s = $RefreshSig$();\nimport '../../styles/appointments/styles.css';\nimport { React, useState } from \"react\";\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport { CREATE_APPOINTMENT } from \"../../utils/mutations\";\nimport { DATE_TIME } from \"../../utils/queries\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Appointments() {\n  _s();\n  const [name, setName] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [time, setTime] = useState(\"\");\n  const [createAppointment, {\n    error\n  }] = useMutation(CREATE_APPOINTMENT);\n  const {\n    data,\n    loading\n  } = useQuery(DATE_TIME);\n  const appointments = (data === null || data === void 0 ? void 0 : data.appointments) || [];\n  console.log(appointments);\n  const appStrings = appointments.map(app => {\n    return app.date + ' ' + app.time;\n  });\n  console.log(appStrings);\n  const handleInputChange = e => {\n    // Getting the value and name of the input which triggered the change\n    const {\n      target\n    } = e;\n    const inputType = target.name;\n    const inputValue = target.value;\n\n    // Based on the input type, we set the state of either email, username, and password\n    if (inputType === 'email') {\n      setEmail(inputValue);\n    } else if (inputType === 'name') {\n      setName(inputValue);\n    } else if (inputType === 'phone') {\n      setPhone(inputValue);\n    } else if (inputType === 'date') {\n      setDate(inputValue);\n    } else if (inputType === 'time') {\n      setTime(inputValue);\n    }\n\n    // if (date && time) {\n    //   console.log(date + ' ' + time);\n    //   console.log('About to check availability...');\n\n    //   if (appStrings.includes(date + ' ' + time)) {\n    //     console.log('Appointment taken...');\n    //     setMessage('Appointment taken...');\n    //   } else {\n    //     setMessage('');\n    //   }\n\n    // }\n  };\n\n  const handleFormSubmit = event => {\n    event.preventDefault();\n    try {\n      const {\n        data\n      } = createAppointment({\n        variables: {\n          name,\n          phone,\n          email,\n          date,\n          time\n        }\n      });\n      setName(\"\");\n      setPhone(\"\");\n      setEmail(\"\");\n      setDate(\"\");\n      setTime(\"\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"block4\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"big\",\n        children: \"Book Appointment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        placeholder: \"Name\",\n        value: name,\n        onChange: event => setName(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"phone\",\n        value: phone,\n        className: \"input\",\n        onChange: event => setPhone(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        value: email,\n        name: \"email\",\n        onChange: handleInputChange,\n        type: \"email\",\n        placeholder: \"email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        value: date,\n        name: \"date\",\n        onChange: handleInputChange,\n        type: \"date\",\n        placeholder: \"date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        value: time,\n        name: \"time\",\n        onChange: handleInputChange,\n        type: \"time\",\n        step: \"360\",\n        placeholder: \"time\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 12\n      }, this), appStrings.includes(date + ' ' + time) ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: true,\n          onClick: handleFormSubmit,\n          children: \"submit!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Please try a different time/date.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: handleFormSubmit,\n        children: \"Book Now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(Appointments, \"KcJMLmYl6MkIp8WJnlYaIz6hmGM=\", false, function () {\n  return [useMutation, useQuery];\n});\n_c = Appointments;\nexport default Appointments;\nvar _c;\n$RefreshReg$(_c, \"Appointments\");","map":{"version":3,"names":["React","useState","useMutation","useQuery","CREATE_APPOINTMENT","DATE_TIME","Appointments","name","setName","phone","setPhone","email","setEmail","date","setDate","time","setTime","createAppointment","error","data","loading","appointments","console","log","appStrings","map","app","handleInputChange","e","target","inputType","inputValue","value","handleFormSubmit","event","preventDefault","variables","includes"],"sources":["/Users/school/Desktop/barbershopProjectNew/client/src/pages/Appointments/index.js"],"sourcesContent":["import '../../styles/appointments/styles.css'\nimport { React, useState } from \"react\";\nimport { useMutation, useQuery } from \"@apollo/client\";\n\nimport { CREATE_APPOINTMENT } from \"../../utils/mutations\";\nimport { DATE_TIME } from \"../../utils/queries\";\n\n\nfunction Appointments() {\n  const [name, setName] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [time , setTime] = useState(\"\");\n\n  const [createAppointment, { error }] = useMutation(CREATE_APPOINTMENT);\n\n  const { data, loading } = useQuery(DATE_TIME);\n  const appointments = data?.appointments || [];\n  console.log(appointments);\n\n  const appStrings = appointments.map(app => {\n    return app.date + ' ' + app.time; \n  });\n\n  console.log(appStrings);\n\n  const handleInputChange = (e) => {\n    // Getting the value and name of the input which triggered the change\n    const { target } = e;\n    const inputType = target.name;\n    const inputValue = target.value;\n\n    // Based on the input type, we set the state of either email, username, and password\n    if (inputType === 'email') {\n      setEmail(inputValue);\n    } else if (inputType === 'name') {\n      setName(inputValue);\n    } else if (inputType === 'phone') {\n      setPhone(inputValue);\n    } else if (inputType === 'date') {\n      setDate(inputValue);\n    } else if (inputType === 'time') {\n      setTime(inputValue);\n    }\n\n    // if (date && time) {\n    //   console.log(date + ' ' + time);\n    //   console.log('About to check availability...');\n      \n    //   if (appStrings.includes(date + ' ' + time)) {\n    //     console.log('Appointment taken...');\n    //     setMessage('Appointment taken...');\n    //   } else {\n    //     setMessage('');\n    //   }\n\n    // }\n  };\n\n  const handleFormSubmit = (event) => {\n    event.preventDefault();\n\n    try{\n      const {data} = createAppointment({\n        variables:{name,phone,email,date,time}\n      });\n      setName(\"\");\n      setPhone(\"\");\n      setEmail(\"\");\n      setDate(\"\");\n      setTime(\"\");\n    } catch(error){\n      console.log(error)\n    }\n  }; \n  \n  return (\n    <div className='block4'>\n        <form className='form'>\n        <h1 className='big'>Book Appointment</h1>\n          <input\n           className='input'\n            placeholder=\"Name\"\n            value={name}\n            onChange={(event) => setName(event.target.value)}\n          />\n           <input\n            placeholder=\"phone\"\n            value={phone}\n            className='input'\n            onChange={(event) => setPhone(event.target.value)}\n          />\n          <input\n          className='input'\n            value={email}\n            name=\"email\"\n            onChange={handleInputChange}\n            type=\"email\"\n            placeholder=\"email\"\n          />\n          <input\n          className='input'\n            value={date}\n            name=\"date\"\n            onChange={handleInputChange}\n            type=\"date\"\n            placeholder=\"date\"\n          />\n           <input\n           className='input'\n            value={time}\n            name=\"time\"\n            onChange={handleInputChange}\n            type=\"time\"\n            step=\"360\"\n            placeholder=\"time\"\n          />\n\n            \n\n             {appStrings.includes(date + ' ' + time) ? (\n              <>\n               <button type=\"submit\" disabled onClick={handleFormSubmit}>\n                submit!\n              </button>\n\n              <div>\n                Please try a different time/date.\n              </div>\n              </>\n              \n            ) : (\n              <button type=\"submit\" onClick={handleFormSubmit}>\n              Book Now\n            </button>\n            )}\n          \n          \n        </form>\n    </div>\n  );\n}\n\nexport default Appointments;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}